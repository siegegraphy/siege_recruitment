<!DOCTYPE html>
<html lang="pl">
<head>
  <meta charset="UTF-8">
  <title>Operator</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>

  <div class="logo-link">
    <a id="logo-link" href="index.html">
      <img id="titleLogo" src="Images/RecruitmentLogo.png" alt="Title Logo">
    </a>   
  </div>  

  <div class="operator-info">
    <div class="single-container">
      <div class="iconAndName-container">
        <img id="operatorIcon" alt="Icon">
        <span id="codename" class="static-text"></span>
      </div>
  
      <div id="side-container">
        <span id="side-label-operator">SIDE</span>
        <img id="side-image" alt="Side icon">
        <span id="side-text"></span>
      </div>
  
      <div id="squad-container">
        <span id="squad-label-operator">SQUAD</span>
        <img id="squad-image" alt="Squad icon">
        <span id="squad-text"></span>
      </div>
  
      <div id="specialty-container">
        <span id="specialty-label-operator">SPECIALTY</span>
        <div class="specialty-divider"></div>
        <p id="specialty-output" class="specialty-output"></p>
      </div>
  
      <div id="health-speed-container">
        <div class="health-speed-item">
          <span id="health-label-operator">HEALTH</span>
          <div class="health-speed-divider"></div>
          <img id="health-image" alt="">
        </div>
        <div class="health-speed-item">
          <span id="speed-label-operator">SPEED</span>
          <div class="health-speed-divider"></div>
          <img id="speed-image" alt="">
        </div>
      </div>
    </div>
  
    <div class="single-container">
      <div class="flagAndCountry-container">
          <img id="operatorFlag" alt="Icon">
          <span id="country" class="static-text"></span>
      </div>
      <div id="realName-container">
        <span id="realName-label-operator">REAL NAME</span>
        <span id="realName" class="operatorInfo-text"></span>
      </div>
      <div class="specialty-divider"></div>
      <div id="dateOfBirth-container">
        <span id="dateOfBirth-label-operator">DATE OF BIRTH</span>
        <span id="dateOfBirth" class="operatorInfo-text"></span>
      </div>
      <div class="specialty-divider"></div>
      <div id="placeOfBirth-container">
        <span id="placeOfBirth-label-operator">PLACE OF BIRTH</span>
        <span id="placeOfBirth" class="operatorInfo-text"></span>
      </div>
      <div id="specialty-container">
        <div>
          <span id="realName-label-operator">REAL NAME</span>
          <span id="realName" class="operatorInfo-text"></span>
        </div>
        <div class="specialty-divider"></div>
        <span id="dateOfBirth-label-operator">DATE OF BIRTH</span>
        <span id="dateOfBirth" class="operatorInfo-text"></span>
      </div>
    </div>
  </div>

  <h1 class="title-loadout-loadout">LOADOUT</h1>

  <div class="triple-container">
    <div class="section-triple">
      <h2 class="title-loadout-operator">PRIMARY WEAPON</h2>
      <div id="primary-container"></div>
    </div>

    <div class="section-triple">
      <h2 class="title-loadout-operator">SECONDARY WEAPON</h2>
      <div id="secondary-container"></div>
    </div>

    <div class="section-triple">
      <h2 class="title-loadout-operator">GADGET</h2>
      <div id="gadget-container"></div>
    </div>

    <div class="section-triple">
      <h2 class="title-loadout-operator">UNIQUE ABILITY</h2>
      <div> <img id="unique-ability-image" class="ability-icon loadout" alt=""> </div>
    </div>
  </div>

  <h1 class="title-ability">UNIQUE ABILITY AND PLAYSTYLE</h1>
  <textarea id="description" readonly spellcheck="false" style="overflow:hidden"></textarea>

  <h1 class="title-biography">BIOGRAPHY</h1>
  <textarea id="biography" readonly spellcheck="false"></textarea>

<script>
function insertImages(containerId, images) {
  const container = document.getElementById(containerId);
  container.innerHTML = "";

  images.forEach(src => {
    const wrapper = document.createElement("div");
    wrapper.className = "grid-triple";

    const img = document.createElement("img");
    img.className = "loadout";
    img.src = src;

    wrapper.appendChild(img);
    container.appendChild(wrapper);
  });
}

function fitTextarea(ta) {
  ta.style.height = "auto";
  ta.style.height = ta.scrollHeight + "px";
}

function fitAllTextareas() {
  document.querySelectorAll("textarea").forEach(fitTextarea);
}

async function loadOperator() {
  const params = new URLSearchParams(window.location.search);
  const op = params.get("op");

  if (!op) return;

  const script = document.createElement("script");
  script.src = `Operators/${op}.js`;

  script.onload = () => {
    const data = window.operatorData;

    document.getElementById("operatorIcon").src = data.icon;
    document.getElementById("codename").textContent = data.codename;

    document.getElementById("side-image").src = data.side.image;
    document.getElementById("side-text").textContent = data.side.text;

    document.getElementById("squad-image").src = data.squad.image;
    document.getElementById("squad-text").textContent = data.squad.text;

    document.getElementById("specialty-output").textContent = data.specialty;

    document.getElementById("health-image").src = data.health;
    document.getElementById("speed-image").src = data.speed;

    document.getElementById("operatorFlag").src = data.flag;
    document.getElementById("country").textContent = data.country;

    document.getElementById("realName").textContent = data.realName;
    document.getElementById("dateOfBirth").textContent = data.dateOfBirth;
    document.getElementById("placeOfBirth").textContent = data.placeOfBirth;

    insertImages("primary-container", data.primaryWeapons);
    insertImages("secondary-container", data.secondaryWeapons);
    insertImages("gadget-container", data.gadgets);

    document.getElementById("unique-ability-image").src = data.uniqueAbility;

    document.getElementById("description").value = data.description;
    document.getElementById("biography").value = data.biography;

    fitAllTextareas();
  };

  document.body.appendChild(script);
}

loadOperator();
</script>

</body>
</html>
